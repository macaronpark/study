# SSH(Secure Shell)

원격 서버/서비스에 안전하게 접속하는 프로토콜

## HTTPS vs SSH 연결 차이

- HTTP / HTTPS
  - 카테고리: **웹 전송 프로토콜**
  - 역할: 브라우저와 웹 서버가 문서, 이미지, API 데이터 등을 주고받는 규약
  - HTTPS는 HTTP에 SSL/TLS 보안 계층을 추가한 버전
- SSH
  - 카테고리: **원격 접속/보안 프로토콜**
  - 역할: 네트워크를 통해 원격 서버에 로그인·명령 실행·파일 전송을 안전하게 하기 위한 규약
  - GitHub에서 쓰이는 이유: **인증 수단** => 매번 비밀번호를 입력하는 대신 공개키/비밀키 기반 인증

## 동작 원리

문을 열 수 있는 열쇠(비밀키)는 나만 갖고 있고 자물쇠(공개키)는 서버에 걸어두는 구조

- 비대칭 암호화: 두 개의 키가 쌍으로 동작해 비밀번호 없이도 안전하게 인증 가능
  - **비밀키 (Private Key)**
    - 내 컴퓨터에만 저장됨 (~/.ssh/id_rsa)
    - 절대 공유하면 안 됨
    - 서버와 통신할 때 실제 **열쇠** 역할
  - **공개키 (Public Key)**
    - 자유롭게 배포 가능 (~/.ssh/id_rsa.pub)
    - 원격 서버(GitHub 등)에 등록해둠
    - 서버는 공개키를 보고 **이 사람이 가진 비밀키와 맞는지** 확인

## Github SSH 설정 후 git clone을 하면 발생하는 일

1. 클라이언트 요청 시작
   - `git clone git@github.com:username/repo.git`
   - git이 내부적으로 SSH 프로토콜을 사용해 git@github.com에 연결 시도
2. 서버(GitHub)의 확인
   - Github에서 이 사용자가 인증된 사용자인지 확인하기 위해 **암호화된 무작위 데이터(challenge)를 보냄**
   - 이 challenge는 GitHub가 저장해둔 **공개키로만 해석 가능**
3. 클라이언트(맥북)의 응답
   - 내 로컬의 비밀키가 사용됨
   - 클라이언트는 **GitHub가 보낸 challenge를 비밀키로 서명(Signature)해서 돌려줌**
   - 이때 비밀키는 절대 네트워크에 직접 전송되지 않고, **비밀키로 만든 증명값만 보냄**
4. GitHub의 검증
   - GitHub는 **미리 등록된 공개키를 꺼내서, 클라이언트가 보낸 서명이 맞는지 검증**
   - 검증 성공 시 -> '비밀키를 가진 혼모노다!'하고 인증됨
   - 검증 실패 시 -> '이건 내가 등록해둔 키 쌍과 안 맞는다'하고 거부
5. 인증 성공 후 레포 전송
   - git이 내부적으로 암호화된 SSH 채널을 통해 데이터를 받음 -> 내 로컬에 복제 완료

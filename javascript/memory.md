# 메모리

자바스크립트를 실행하면 런타임 환경(브라우저, Node.js)에 의해 파싱 -> 컴파일 -> 실행 과정을 거친다.
이 과정에서 실행에 필요한 코드와 데이터가 메모리에 로드된다.

## 메모리 구성

- 코드
  - 실행할 명령어(기계어 코드)를 저장하는 영역
- 데이터
  - 전역 변수, 상수를 저장하는 영역
- 스택
  - 함수가 실행될 때 함수의 실행 컨텍스트를 저장하는 영역
    - 실행 컨텍스트 => 함수 호출 시 생성되는 환경: 지역 변수, 매개변수, this 바인딩, 외부 스코프 정보 등
  - 고정된 크기 => 스택이 꽉 차면 스택 오버플로우 발생
  - 빠른 속도 => 함수 실행과 종료시 자동으로 메모리에 올라오고 해제됨
- 힙
  - 객체/배열/함수와 같이 참조 타입의 실제 데이터를 저장하는 영역
  - 가변 크기 => 런타임에 동작 할당 가능
  - 느린 속도 => 가비지 컬렉터의 개입으로 비교적 느림

## 가비지 콜렉터

- 힙 메모리에 저장되어있는 참조 타입 데이터 중 불필요한 데이터를 자동으로 제거함
- 메모리 해제 기준
  - 단순히 참조 카운트가 0이면 해제하는 것이 아님
  - 도달 가능성, 즉 진입 파일에서부터 해당 객체에 도달 가능한지(reachability) 여부를 판단함
- 엔진에서 적절한 시점에 주기적으로 실행함 => 타이밍을 정확히 제어할 수 없음
